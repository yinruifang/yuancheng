<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>拖拽基础知识</title>
		<style type="text/css">
			ul,li{list-style: none;}
			li{width: 100px; height: 50px; background: #008000; margin:10px;}
			.box{width: 600px; height: 400px; border:5px solid blue; margin: 100px;}
		</style>
	</head>
	<body>
		<ul>
			<!--dom节点想要拖拽，必须设置draggable="true"-->
			<li draggable="true">111</li>
			<li draggable="true">222</li>
			<li draggable="true">333</li>
		</ul>
		<div class="box" id="box"></div>
		<script type="text/javascript">
			/*
			1.dom节点想要拖拽，必须设置draggable="true"
			2.拖拽源，有三个事件ondragstart（开始拖拽）  ondrag（拖拽中）   ondragend（结束拖拽）
			3.拖拽目的地，有三个事件  ondragenter(进入目的地)  ondragover(在目的地上方) ondragleave(离开目的地)
			
			以上事件的执行顺序是：ondragstart > ondrag > ondragenter > ondragover > ondragleave > ondragend
			如果在ondragover中阻止了默认事件后，执行顺序是:
								ondragstart > ondrag > ondragenter > ondragover > drop > ondragend
 			*/
			window.onload = function(){
				
				//1.获取到节点信息
				var aLi = document.getElementsByTagName('li');
				var oBox = document.getElementById('box');
				
				for(var i = 0;i<aLi.length;i++){
					//2.绑定开始拖拽的事件
					aLi[i].ondragstart = function(){
						this.style.background = 'red';
					}
					
					//3.绑定拖拽中的事件,只要按住鼠标拖拽，该事件会持续触发
					var num = 0;
					aLi[i].ondrag = function(){
						num++;
						//console.log(num);
					}
					
					//4.绑定拖拽结束的事件
					aLi[i].ondragend = function(){
						this.style.background = "pink";
					}
				}
				
				//拖拽目的地
				//绑定拖拽的内容进入目的地的事件
				oBox.ondragenter = function(){
					this.style.background = "orange";
				}
				//绑定在目的地上方的事件，会持续触发
				//想要ondrop事件触发，必须在ondragover这个事件中阻止默认事件
				oBox.ondragover = function(ev){
					//阻止默认事件
					//ev.preventDefault();
					return false;
				}
				//绑定在目标元素上释放鼠标的事件
				//注意：以后的代码中 drop经常使用
				oBox.ondrop = function(){
					console.log("drop事件触发了");
				}
				
				//绑定离开目的地的事件
				oBox.ondragleave = function(){
					this.style.background = "#ccc";
				}
				
				
			}
		</script>
		
	</body>
</html>
